<!doctype html>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  html, body { height: 100%; margin: 0; }
  /* Tam pencere kapla */
  #wrap { position: fixed; inset: 0; }
  #rive { width: 100%; height: 100%; display: block; }
</style>

<div id="wrap"><canvas id="rive"></canvas></div>

<script src="https://unpkg.com/@rive-app/canvas@2"></script>
<script>
  const canvas = document.getElementById('rive');
  let riveInstance;

  // Canvas'ı cihaz DPR'ına göre boyutlandır
  function sizeCanvasToDisplay() {
    const dpr = Math.max(1, window.devicePixelRatio || 1);
    // CSS boyutu (px)
    const cssW = canvas.clientWidth;
    const cssH = canvas.clientHeight;
    // Backing store boyutu
    canvas.width  = Math.round(cssW * dpr);
    canvas.height = Math.round(cssH * dpr);
    // Rive’a çizim yüzeyinin değiştiğini söyle
    if (riveInstance && typeof riveInstance.resizeDrawingSurfaceToCanvas === 'function') {
      riveInstance.resizeDrawingSurfaceToCanvas();
    }
  }

  // İlk kurulum
  riveInstance = new rive.Rive({
    src: "./assets/animation.riv",
    canvas,
    autoplay: true,
    artboard: "MainScreen",
    stateMachines: ["State Machine 1"],
    // Görüntüyü güzelce yaymak için
    layout: new rive.Layout({ fit: rive.Fit.COVER, alignment: rive.Alignment.CENTER }),
    onLoad: () => {
      sizeCanvasToDisplay();
      riveInstance.play();
    }
  });

  // Pencere yeniden boyutlandığında güncelle
  window.addEventListener('resize', sizeCanvasToDisplay);
  // Zoom/DPR değişiklikleri için
  window.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`)
        .addEventListener?.('change', sizeCanvasToDisplay);
</script>
