<!doctype html>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  /* Responsive wrapper: fills whatever size the Sites iframe gets */
  #wrap {
    width: 100%;
    aspect-ratio: 800 / 500;   /* keeps 800Ã—500 ratio */
    position: relative;
  }
  #rive {
    position: absolute; inset: 0;
    width: 100%; height: 100%;
    display: block;
  }
</style>

<div id="wrap"><canvas id="rive"></canvas></div>

<script src="https://unpkg.com/@rive-app/canvas@2"></script>
<script>
  const wrap = document.getElementById('wrap');
  const canvas = document.getElementById('rive');

  function dpr() { return Math.max(1, window.devicePixelRatio || 1); }

  function resizeCanvas() {
    // Use wrapper's size, not canvas's
    const w = wrap.clientWidth;
    const h = wrap.clientHeight;
    canvas.width  = Math.round(w * dpr());
    canvas.height = Math.round(h * dpr());
  }

  // Observe wrapper size for reliable resize inside Google Sites
  new ResizeObserver(resizeCanvas).observe(wrap);
  window.addEventListener('resize', resizeCanvas);

  const r = new rive.Rive({
    src: "./assets/animation.riv",
    canvas,
    autoplay: true,
    artboard: "Artboard",
    stateMachines: ["State Machine 1"],
    layout: new rive.Layout({
      fit: rive.Fit.cover,           // <-- fills area; switch to .contain if you need full view with padding
      alignment: rive.Alignment.center
    })
  });

  // Initial sizing
  resizeCanvas();
</script>
